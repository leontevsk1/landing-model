# Модель демонстрирующая работу решения в режиме посадки

## Цель

Смоделировать посадку БПЛА по сигналам с маяка

## Принцип реализации

### БПЛА

- моделируется как **точка** на плоскости;

- имеет **направленную антенну** (угол приёма ≈ 45°);

- управляется в трех координатах;

- логика полёта — **наш адаптированный курсово-глиссадный алгоритм**.

### Маяк

- моделируется как **точка** с восемью секторами излучения по 45°;

- активирует сектора **поочерёдно**;

- вычисляет и передаёт мощность сигнала в направлении на БПЛА.

### Сценарии

- отдельный модуль для параметров (ветер, шум, стартовые координаты);

- реализуем **в последнюю очередь**;

- если не успеваем — описываем логику и оставляем заглушки.

### Визуализация

- плоская 2D-анимация: маяк, сектора, траектория БПЛА;

- matplotlib / FuncAnimation (или аналог);

- вывод в `.gif` / `.mp4` для презентации.


## Структура

### Тут пишем общую структуру и документируем функции чтобы быстрее понимать что делать в задачах

**Базовая структура проекта:**

```bash
.
├──.git
├──.gitignore 
├── environment.lock.yml - конфиг окружения
├── README.md
├── export_data/ - директория для экспорта анимаций
├── src/
│   ├── classes.py- логика классов
│   ├── main.py   - посадка в идеале
│   ├── scenes.py - сценарии посадки
│   └── visual.py - визуализация
└── как-ведем-гит.md
```


Вот лаконичная документация для `classes.py`:

---

## **Модуль `classes.py`**

Симуляция излучения и восприятия электромагнитных маяков в трёхмерной среде.

### **Константы**

* `N` — количество секторов (8).
* `STEP` — шаг между секторами (π/4).
* `WIDTH` — угловая ширина лепестка (π/3).
* `HALF` — половина ширины лепестка (π/6).
* `POWER` — базовая мощность излучателя (15 Вт).

---

### **Функции**

#### `axis_unit(i: int) -> np.ndarray`

Возвращает единичный вектор направления оси сектора `i` в локальных координатах.
Используется для определения ориентации излучения маяка.

#### `energy_flux(R: float, alpha: float, w: float, P: float) -> float`

Вычисляет плотность потока энергии (Вт/м²) на расстоянии `R` и под углом `alpha` от оси диаграммы:

* `R` — расстояние до точки;
* `alpha` — угол отклонения (рад);
* `w` — ширина лепестка (рад);
* `P` — мощность излучения (Вт).

---

### **Классы**

#### `Beacon`

Модель излучателя (маяка).
**Поля:**

* `pos` — координаты в пространстве (x, y, z);
* `sector_id` — активный сектор (0–7);
* `power_w`, `width_rad` — параметры излучения.

**Методы:**

* `set_sector(i)` — выбрать сектор диаграммы.

---

#### `Environment`

Модель среды, содержащей набор маяков.
**Методы:**

* `power_lin_at(pos)` — суммирует линейную мощность поля в точке `pos` от всех маяков.
  Использует геометрию и направленность источников.

---

#### `Drone`

Модель приёмника (дрона).
**Поля:**

* `pos` — координаты;
* `landing_power`, `safe_power` — пороговые уровни;
* `landing_flag` — состояние посадки.

**Методы:**

* `measure_flux(env)` — измеряет поток энергии в текущей позиции, используя `Environment`.

---

### **Пример использования**

```python
b = Beacon()
e = Environment([b])
d1 = Drone(10.0, 1.0, 0.0)
b.set_sector(0)
print(d1.measure_flux(e))
```

---